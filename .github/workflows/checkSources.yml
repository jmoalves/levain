name: Check sources

on:
  #push:

  workflow_dispatch:

  schedule:
    # * is a special character in YAML so you have to quote this string
    - cron:  '30 4 * * SUN'

jobs:
  checkSources:
    runs-on: windows-latest

    steps:
      - name: Clean TEMP
        run: |
          cmd /c rmdir /q/s %RUNNER_TEMP%
          cmd /c mkdir %RUNNER_TEMP%
        env:
          RUNNER_TEMP: ${{ runner.temp }}

      - name: Clean Workspace
        run: |
          cmd /c rmdir /q/s %GITHUB_WORKSPACE%
          cmd /c mkdir %GITHUB_WORKSPACE%
        env:
          GITHUB_WORKSPACE: ${{ github.workspace }}

      - name: Checkout
        uses: actions/checkout@v4

      - name: Get Deno
        run: |
          cmd /c rmdir /q/s %DENO_ROOT_PATH%
          cmd /c mkdir %DENO_ROOT_PATH%
          cmd /c echo Deno Windows
          cmd /c %GITHUB_WORKSPACE%/githubScripts/get-deno.cmd %DENO_ROOT_PATH%
        env:
          DENO_ROOT_PATH: ${{ runner.temp }}/deno
          GITHUB_WORKSPACE: ${{ github.workspace }}

      - name: Check sources
        run: |
          cmd /c %GITHUB_WORKSPACE%/githubScripts/levain-chech.cmd %DENO_ROOT_PATH%/deno
        env:
          DENO_ROOT_PATH: ${{ runner.temp }}/deno
          GITHUB_WORKSPACE: ${{ github.workspace }}
